# 为什么要修改host



## 1.1 加快域名解析

+ 访问网站  通过DNS把**域名**进行解析，找到对应的**IP地址** 才可以访问

  + 例如：www.baidu.com --> 119.75.217.109

+ host 相当于本地的一个DNS服务，输入域名的时候，计算机先从host文件中查找有没有这个域名。如果存在，则直接访问这个域名对应的IP，**加快域名解析**；如果没有，再去DNS服务器上找

  

## 1.2 方便本地调试

局域网中一般很少 架设DNS服务器，访问的时候需要输入IP，输入IP很麻烦，可以给这些服务器取一个容易记住的地址，在host中与IP建立好映射，访问的时候输入地址就行了。



## 1.3 可以屏蔽特定的网站

```shell
0.0.0.0    #网站
127.0.0.1 # 网站
```



## 1.4 顺利连接系统

对于Lotus的服务器和一些数据库服务器，在访问时如果直接输入IP地址那是不能访问的，只能输入服务器名才能访问。那么我们配置好Hosts文件，这样输入服务器名就能顺利连接了。

**Hosts文件配置的映射是静态的，如果网络上的计算机更改了请及时更新IP地址，否则将不能访问。**



# 修改hosts

+ Windows 系统 Hosts 文件路径：C:\Windows\System32\drivers\etc\hosts
+ Mac 系统 hosts 文件路径：/etc/hosts
+ Linux 系统的 hosts 文件一般也是在：/etc/hosts
+ Android 系统的 hosts 文件路径：/system/etc/hosts (需要Root权限修改)

# 使用场景

开发时，两套环境：正式、测试

+ 测试环境 ：开发、测试使用
+ 正式环境： 上线后使用
+ 开发或测试应用时，利用 hosts 将域名临时指向到测试服务器IP，可以方便自己测试，同时又不影响他人和线上的应用。
+ 

## 修改 hosts 后不生效怎么解决？



无论是手工修改 hosts 还是使用软件来修改，很多人都会遇到修改 hosts 后不生效的情况。其实，这一般是由于 DNS 缓存的原因导致的。因为系统为了加快用户打开网站的速度，在首次访问网站成功之后，会把 DNS 解析的结果暂时性地保存在本地缓存 (称为 DNS 缓存) 里一小段时间，如果浏览器在“这段时间里”再次打开同一个网址，则会自动从 DNS 缓存里取出结果，而不会请求远程的 DNS 服务器，也不会查询 hosts 文件，从而节省时间提高打开速度。因此用户会遇到有时修改了 hosts 文件但并不生效的情况，一般这时候我们想办法清空 (刷新) 一下系统的 DNS 缓存即可。

## 怎样清空 DNS 缓存？

- 在 Windows 下命令行执行：ipconfig /flushdns
- 在 macOS 下执行命令：sudo killall -HUP mDNSResponder
- 如果你使用 Chrome 浏览器，那么可以访问：chrome://net-internals/#dns，然后点击「Clear host cache」按钮来清空浏览器里的 DNS 缓存。

如果这样还不生效，那么只能再试试重启电脑了，一般都OK了。要这样还是不行，可能就是你的 hosts 写错了。

## 总结：

说了那么多，其实 hosts 并不神秘，简单理解它就是个电脑本机的「IP地址<=>域名」的对应表，系统或任何软件都会优先先检查 hosts 里面有没对应的配置，之后才会去查询网上的 DNS 服务器。因此你可以利用 hosts 做很多有趣、有用的事情。而借助 SwitchHosts! 工具，你可以方便地备份hosts，也能快速切换不同的 hosts 配置，甚至使用远程的 hosts 文件等，甚是方便！

